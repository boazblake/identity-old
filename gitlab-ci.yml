image: node:12

pages:
  cache:
    paths:
    - node_modules/

  script:
  - npm update
  - npm install -g brunch
  - yarn run build:pre && brunch build --production
  artifacts:
    paths:
    - docs
  rules:
    - if: $CI_COMMIT_REF_NAME == $CI_DEFAULT_BRANCH
    stage: deploy
